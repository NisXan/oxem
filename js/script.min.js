!function(e){var t,a=function(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}()+".mask",n=navigator.userAgent,r=/iphone/i.test(n),l=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var a;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((a=this.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",e),a.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),e=0-a.duplicate().moveStart("character",-1e5),t=e+a.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,i){var o,s,c,u,p;return!n&&this.length>0?e(this[0]).data(e.mask.dataName)():(i=e.extend({placeholder:e.mask.placeholder,completed:null},i),o=e.mask.definitions,s=[],c=p=n.length,u=null,e.each(n.split(""),function(e,t){"?"==t?(p--,c=e):o[t]?(s.push(RegExp(o[t])),null===u&&(u=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function d(e){for(;p>++e&&!s[e];);return e}function m(e,t){var a,n;if(!(0>e)){for(a=e,n=d(t);p>a;a++)if(s[a]){if(!(p>n&&s[a].test(h[n])))break;h[a]=h[n],h[n]=i.placeholder,n=d(n)}v(),$.caret(Math.max(u,e))}}function f(e,t){var a;for(a=e;t>a&&p>a;a++)s[a]&&(h[a]=i.placeholder)}function v(){$.val(h.join(""))}function g(e){var t,a,n=$.val(),r=-1;for(t=0,pos=0;p>t;t++)if(s[t]){for(h[t]=i.placeholder;pos++<n.length;)if(a=n.charAt(pos-1),s[t].test(a)){h[t]=a,r=t;break}if(pos>n.length)break}else h[t]===n.charAt(pos)&&t!==c&&(pos++,r=t);return e?v():c>r+1?($.val(""),f(0,p)):(v(),$.val($.val().substring(0,r+1))),c?t:u}var $=e(this),h=e.map(n.split(""),function(e){return"?"!=e?o[e]?i.placeholder:e:void 0}),y=$.val();$.data(e.mask.dataName,function(){return e.map(h,function(e,t){return s[t]&&e!=i.placeholder?e:null}).join("")}),$.attr("readonly")||$.one("unmask",function(){$.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){var e;clearTimeout(t),y=$.val(),e=g(),t=setTimeout(function(){v(),e==n.length?$.caret(0,e):$.caret(e)},10)}).bind("blur.mask",function(){g(),$.val()!=y&&$.change()}).bind("keydown.mask",function(e){var t,a,n,l=e.which;8===l||46===l||r&&127===l?(a=(t=$.caret()).begin,0==(n=t.end)-a&&(a=46!==l?function(e){for(;--e>=0&&!s[e];);return e}(a):n=d(a-1),n=46===l?d(n):n),f(a,n),m(a,n-1),e.preventDefault()):27==l&&($.val(y),$.caret(0,g()),e.preventDefault())}).bind("keypress.mask",function(t){var a,n,r,o=t.which,c=$.caret();t.ctrlKey||t.altKey||t.metaKey||32>o||o&&(0!=c.end-c.begin&&(f(c.begin,c.end),m(c.begin,c.end-1)),a=d(c.begin-1),p>a&&(n=String.fromCharCode(o),s[a].test(n)&&(function(e){var t,a,n,r;for(t=e,a=i.placeholder;p>t;t++)if(s[t]){if(n=d(t),r=h[t],h[t]=a,!(p>n&&s[n].test(r)))break;a=r}}(a),h[a]=n,v(),r=d(a),l?setTimeout(e.proxy(e.fn.caret,$,r),0):$.caret(r),i.completed&&r>=p&&i.completed.call($))),t.preventDefault())}).bind(a,function(){setTimeout(function(){var e=g(!0);$.caret(e),i.completed&&e==$.val().length&&i.completed.call($)},0)}),g()}))}})}(jQuery),$(function(){const e=new Swiper(".slider",{slidesPerView:1,spaceBetween:140,loop:!0,wrapperClass:"slider__wrapper",slideClass:"slider__card",preloadImages:!1,lazy:!0,pagination:{el:".slider__pagination",type:"bullets",bulletClass:"paginator__item",bulletActiveClass:"paginator__item--active",clickable:!0},navigation:{nextEl:".slider__button-next",prevEl:".slider__button-prev"}});$(".lazy").lazy(),$("#formPhone").mask("+7 (999) 999 99 99");const t=function(){let t=24*(e.realIndex+1);$(".slider__button-next").html('<svg width="48" height="48"><circle transform="rotate(-90)" r="23" cx="-24" cy="24" /><circle transform="rotate(-90)" style="stroke-dasharray:'+t+'px 360px;" r="23" cx="-24" cy="24" /></svg>')};t(),e.on("slideChange",()=>{t()});const a=$("#priceAuto-range").rangeslider({polyfill:!1,onSlide:()=>{n(),r()}});$("#firstPayment-range").rangeslider({polyfill:!1,onSlide:()=>{n(),r()}}),$("#leaseTerm-range").rangeslider({polyfill:!1,onSlide:()=>{n(),r()}}),$("#priceAuto-range").on("input",function(e){$("#priceAuto-value").val((+e.currentTarget.value).toLocaleString())}),$("#priceAuto-value").on("focus",()=>{const e=+$("#priceAuto-value").val().replace(/[^\d]/g,"");$("#priceAuto-value").val(e)}).on("input",()=>{const e=+$("#priceAuto-value").val().replace(/[^\d]/g,"");$("#priceAuto-value").val(e)}).on("blur",()=>{let e=$("#priceAuto-value").val();e<1e6?e=1e6:e>6e6&&(e=6e6),$("#priceAuto-range").val(e),$("#priceAuto-value").val((+e).toLocaleString()),$("#priceAuto-range").rangeslider("update",!0)}),$("#firstPayment-range").on("input",function(e){$(".form__input-percent").html(e.currentTarget.value+"%"),$("#firstPayment-input").val((e.currentTarget.value*+a[0].value.replace(/\s/g,"")/100).toLocaleString()+" ₽")}),$("#firstPayment-input").on("focus",()=>{const e=+$("#firstPayment-input").val().replace(/[^\d]/g,"");$("#firstPayment-input").val(e)}).on("input",()=>{const e=+$("#firstPayment-input").val().replace(/[^\d]/g,"");$("#firstPayment-input").val(e)}).on("blur",()=>{let e=$("#firstPayment-input").val();const t=+a[0].value.replace(/\s/g,""),n=10*t/100,r=60*t/100;e<n?e=n:e>r&&(e=r);const l=parseInt(100*e/t);$(".form__input-percent").html(l+"%"),$("#firstPayment-range").val(l),$("#firstPayment-input").val(e.toLocaleString()+" ₽"),$("#firstPayment-range").rangeslider("update",!0)}),$("#leaseTerm-range").on("input",function(e){$("#leaseTerm-input").val(+e.currentTarget.value)}),$("#leaseTerm-input").on("blur",()=>{let e=$("#leaseTerm-input").val();e<1?e=1:e>60&&(e=60),$("#leaseTerm-input").val(e),$("#leaseTerm-range").val(e),$("#leaseTerm-range").rangeslider("update",!0)});const n=()=>{const e=$("#priceAuto-range").val(),t=$("#firstPayment-input").val(),a=$("#leaseTerm-range").val(),n=+e-+t.replace(/[^\d]/g,"")*(.1/(1.1-+a-1));$("#monthlyPayment").val(parseInt(n).toLocaleString()+" ₽")};n();const r=()=>{const e=$("#leaseTerm-range").val(),t=$("#firstPayment-input").val(),a=$("#monthlyPayment").val(),n=+t.replace(/[^\d]/g,"")+e*+a.replace(/[^\d]/g,"");$("#sumLease").val(parseInt(n).toLocaleString()+" ₽")};r();$('input[type="text"]').on("focus",e=>{$(e.target).parent().toggleClass("input-active")}).on("blur",e=>{$(e.target).parent().toggleClass("input-active")}),$(window).on("load resize scroll",()=>{if($(window).width()<"768"){const e=$(".slider").innerHeight();$(".header").offset().top+72>=e?$(".header").addClass("bg"):$(".header").removeClass("bg")}$(window).width()<"1023"&&$(".init-drop").on("click",e=>{if($(e.target).parent().hasClass("active"))return!0;$(e.target).parent().addClass("active"),e.preventDefault()})}),$(".header__toggle").click(function(){$("body").toggleClass("active"),$(".menu").toggleClass("active"),$(".header__toggle").toggleClass("active")});const l=$("#popup-container");let i=$(".close");const o=$("#feedback"),s=()=>{$(l).addClass("active"),$("html").css("overflow","hidden"),$("body").css("overflow","hidden"),$("#priceAutoParse").val($("#priceAuto-range").val()),$("#firstPaymentParse").val($("#firstPayment-range").val()),$("#leaseTermParse").val($("#leaseTerm-range").val()),$("#sumLeaseParse").val($("#sumLease").val()),$("#monthlyPaymentParse").val($("#monthlyPayment").val())},c=()=>{$(l).removeClass("active"),$("html").css("overflow","initial"),$("body").css("overflow","initial"),o.hide()};$(window).click(function(e){$(e.target).hasClass("modal")?c():$(e.target).hasClass("modal-popup")&&(s(),o.show())}),$(i).click(function(){c()}),$("#form").submit(function(){var e=$(this).attr("id"),t=$("#"+e);return $.ajax({type:"POST",url:"feedback.php",data:t.serialize(),success:function(e){$("#form_result").html(e),o.hide(),c(),setTimeout(function(){$("#form_result").html(""),$(".formInfo").not(":input[type=submit], :input[type=hidden]").val("")},3e3)},error:function(e,t,a){$("#form_result").html(a),o.show(),setTimeout(function(){$("#form_result").html("")},3e3)}}),!1})});